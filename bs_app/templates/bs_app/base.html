<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href='/static/bs_app/bootstrap.css'/>

  </head>
  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/app/home">Bookstore</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li><a href="/app/books">Books</a></li>
            <li><a href="/app/authors">Authors</a></li>
            <li><a href="/app/categories">Categories</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/auth/logout/">Logout</a></li>
          </ul>
          <ul class="navbar-form navbar-right" >
            <label for="search_by">Search By</label>
            <select class='form-control' name="search_by" id="search_by">
              <option value="book">Book</option>
              <option value="author">Author</option>
            </select>
            <div class="input-group">
              <input type="text" class="form-control" id="query" placeholder="Search for...">
              <span class="input-group-btn">
                <a class="btn btn-default" id="search" >Go!</a>
              </span>
            </div><!-- /input-group -->
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-xs-8">
          {%block content %}
          {% endblock %}
        </div>
        <div class="col-xs-4">
          <!-- side bar  -->
          <h4>My Categories</h4>
          <ul>
            {% for category in request.user.profile.categories.all %}
              <li><a href="/app/categories/{{category.id}}">{{category.name}}</a></li>
            {% endfor %}
          </ul>

          <h4>My Authors</h4>
          <ul>
            {% for author in request.user.profile.authors.all %}
              <li><a href="/app/authors/{{author.id}}">{{author.name}}</a></li>
            {% endfor %}
          </ul>

        </div>
      </div>
    </div>
    <script type="text/javascript" src='/static/bs_app/js/jquery.min.js' ></script>

    <script type="text/javascript">

      function search(){
        search_by = document.getElementById('search_by').value.trim()
        query = document.getElementById('query').value.trim()
        if(query != ""){
          window.location = window.location.protocol + "//" + window.location.host + "/app/search/"+ search_by +"/" + query;
        }
      }
      $('#search').click(search)
      $('#query').keypress(function(e){
        if(e.which == 13){
          search()
        }
      })
    </script>
  </body>
</html>
